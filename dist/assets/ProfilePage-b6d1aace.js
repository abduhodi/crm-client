import{u as j}from"./auth-6e6f8a76.js";import{q as V,S as O}from"./mdi-b3f72374.js";import{_ as f}from"./VInput-5d59eade.js";import{_,s as N}from"./VButton-ff6e3586.js";import"./moment-a9aaa855.js";import{r as $,c as y,a as q,o,b,d as t,f as l,u as v,t as g,w as d,g as x,i as k,q as B,h as U}from"./index-c34ed4f6.js";import"./apiClient-172dff35.js";const A={class:"lg:w-[800px] w-full p-5 flex flex-col lg:flex-row gap-[50px] pb-14 font-medium rounded-[10px] border bg-white border-[#12486B]/30 shadow-lg"},M={class:"lg:w-1/2 w-full flex flex-col justify-center items-center gap-5 lg:mb-2 mt-2"},T={class:"w-44 h-44 rounded-full overflow-hidden flex justify-center items-center border shadow-md relative"},z=["src"],G={class:"w-full h-10 bg-transparent/30 bottom-0 absolute flex justify-center items-center"},H={class:"w-full flex justify-center items-center gap-3"},J=t("span",{class:"text-[#3D444F] text-[20px]"},"ID:",-1),K={class:"text-[#065FD4] text-[20px]"},Q={class:"w-full flex justify-between items-center"},R=t("span",{class:"text-[#3D444F] text-[12px]"},"Status:",-1),W={class:"text-[#065FD4] text-[14px]"},X={class:"w-full flex justify-between items-center"},Y=t("span",{class:"text-[#3D444F] text-[12px]"},"Start Date:",-1),Z={class:"text-[#065FD4] text-[14px]"},ee={class:"lg:w-1/2 w-full flex flex-col"},te={key:0,class:"flex gap-5"},ae={__name:"ProfileCard",props:{data:{first_name:"",last_name:"",status:null,phone:"",image:"",role:"",start_date:"",_id:""}},setup(i){const a=j(),e=$(!0),c=i,m=s=>new Date(s).toDateString(),C=()=>{e.value=!0},P=y(()=>({first_name:"required|min:2|max:30",last_name:"required|min:2|max:30",phone:"required"})),S=y(()=>a!=null&&a.loading?"Saving":"Save"),h=async s=>{var u;const n={...s,phone:s.phone.split("").filter(r=>r==="+"||!isNaN(+r)).join(""),image:(u=c.data)==null?void 0:u.image};await a.profileUpdate(n),e.value=!0,N("Saved")};function p(){document.getElementById("fileInput").click()}async function D(s){var r;const n=(r=s==null?void 0:s.target)==null?void 0:r.files,u=new FormData;if((n==null?void 0:n.length)>0){u.append("image",n[0]);const w=await a.uploadImage(u);console.log(w),c.data.image=w}}return(s,n)=>{var r,w,E,I,L;const u=q("vee-form");return o(),b("div",A,[t("div",M,[t("div",T,[t("img",{src:(r=i.data)!=null&&r.image?(w=i.data)==null?void 0:w.image:"src/assets/images/avatar.png",alt:"avatar",class:"w-full h-full object-cover"},null,8,z),t("span",G,[l(v(O),{onClick:n[0]||(n[0]=F=>p()),type:"mdi",path:v(V),class:"hover:text-orange-700 w-[28px] h-[28px] text-color1 cursor-pointer"},null,8,["path"])]),t("input",{type:"file",id:"fileInput",style:{display:"none"},onchange:D})]),t("div",H,[J,t("span",K,g((E=i.data)==null?void 0:E._id),1)]),t("div",Q,[R,t("span",W,g((I=i.data)==null?void 0:I.status),1)]),t("div",X,[Y,t("span",Z,g(m((L=i.data)==null?void 0:L.start_date)),1)])]),t("div",ee,[l(u,{"validation-schema":P.value,"initial-values":c.data,onSubmit:h},{default:d(()=>{var F;return[l(f,{type:"text",name:"first_name",label:"First Name",placeholder:"Enter your name",disabled:e.value},null,8,["disabled"]),l(f,{type:"text",name:"last_name",label:"Last Name",placeholder:"Enter your surname",disabled:e.value},null,8,["disabled"]),l(f,{type:"text",name:"phone",label:"Phone",placeholder:"(+998)-90-123-45-67",mask:"(+998)-##-###-##-##",disabled:e.value},null,8,["disabled"]),e.value?(o(),k(_,{key:1,btn_type:"primary",isLoading:!1,type:"button",class:"mt-5 w-full text-[18px]",onClick:n[1]||(n[1]=re=>e.value=!1)},{default:d(()=>[x(" Edit ")]),_:1})):(o(),b("div",te,[l(_,{btn_type:"danger",isLoading:!1,type:"button",class:"mt-5 w-full text-[18px]",onClick:C},{default:d(()=>[x(" Cancel ")]),_:1}),e.value?B("",!0):(o(),k(_,{key:0,btn_type:"primary",isLoading:(F=v(a))==null?void 0:F.loading,type:"submit",class:"mt-5 w-full text-[18px]"},{default:d(()=>[x(g(S.value),1)]),_:1},8,["isLoading"]))]))]}),_:1},8,["validation-schema","initial-values"])])])}}},se={class:"lg:w-1/3 w-full mb-10 lg:mb-0 flex flex-col p-5 font-medium rounded-[10px] border bg-white border-[#12486B]/30 shadow-lg"},le=t("h1",{class:"w-full text-center text-[24px] text-color1"},"Change Password",-1),ne={key:0,class:"flex gap-5"},oe={__name:"UpdatePasswordForm",setup(i){const a=j(),e=$(!0),c=$({}),m=()=>{c.value={},e.value=!0},C=y(()=>({old_password:"required|min:3|max:30",new_password:"required|min:3|max:30",confirm_password:"required|min:3|max:30"})),P=y(()=>a!=null&&a.loading?"Saving":"Save"),S=async h=>{const p={...h};await a.changePassword(p),e.value=!0,N("Saved"),location.reload()};return(h,p)=>{const D=q("vee-form");return o(),b("div",se,[le,l(D,{"validation-schema":C.value,onSubmit:S,"initial-values":c.value},{default:d(()=>{var s;return[l(f,{type:"text",name:"old_password",label:"Old Password",placeholder:"Enter your old password",disabled:e.value},null,8,["disabled"]),l(f,{type:"text",name:"new_password",label:"New Password",placeholder:"Enter your new password",disabled:e.value},null,8,["disabled"]),l(f,{type:"text",name:"confirm_password",label:"Confirm Password",placeholder:"Confirm your new password",disabled:e.value},null,8,["disabled"]),e.value?(o(),k(_,{key:1,btn_type:"primary",isLoading:!1,type:"button",class:"mt-5 w-full text-[18px]",onClick:p[0]||(p[0]=n=>e.value=!1)},{default:d(()=>[x(" Change password ")]),_:1})):(o(),b("div",ne,[l(_,{btn_type:"danger",isLoading:!1,type:"button",class:"mt-5 w-full text-[18px]",onClick:m},{default:d(()=>[x(" Cancel ")]),_:1}),e.value?B("",!0):(o(),k(_,{key:0,btn_type:"primary",isLoading:(s=v(a))==null?void 0:s.loading,type:"submit",class:"mt-5 w-full text-[18px]"},{default:d(()=>[x(g(P.value),1)]),_:1},8,["isLoading"]))]))]}),_:1},8,["validation-schema","initial-values"])])}}},ie={class:"mt-3 flex lg:flex-row flex-col justify-between items-start gap-10 bg-[#E7EDF0]"},xe={__name:"ProfilePage",setup(i){const a=j();return U(async()=>{await a.getProfileInfo()}),(e,c)=>{var m;return o(),b("div",ie,[l(ae,{data:(m=v(a))==null?void 0:m.user},null,8,["data"]),l(oe)])}}};export{xe as default};
