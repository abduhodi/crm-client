import{A as E}from"./app-modal-afe5a922.js";import{_ as $,s as S,d as N,w as U}from"./VButton-ff6e3586.js";import{_ as j}from"./VInput-5d59eade.js";import{u as B}from"./course-270ae7a5.js";import{S as O,j as H}from"./mdi-b3f72374.js";import{r as n,c as P,l as R,a as F,o as p,b as h,f as e,w as r,d as s,u as _,t as y,g as M,F as T,m as z,h as G,i as q,q as J}from"./index-c34ed4f6.js";import{L as K}from"./Loader-93f7da13.js";import{_ as Q,a as W}from"./VAction-899cce77.js";import"./apiClient-172dff35.js";const X={class:"w-full flex justify-center items-center"},Y={class:"text-[24px] font-bold w-full text-center mb-[20px] text-color1"},Z={class:"flex justify-center items-center w-full gap-3"},ee={class:"text-[24px] font-bold w-full text-center mb-[20px] text-color1"},te={__name:"CourseModal",setup(I,{expose:A}){const t=B(),u=n(!1),l=n(!1),o=n(!1),f=n("Add New Course"),d=n(null),L=n("Are you sure to delete?"),g=P(()=>t.loading?"Loading":"Save"),i=n({name:"",price:null,period:null});R(o,a=>{a||(i.value={},f.value="Add New Course")});const D=a=>{a._id&&(i.value={...a},f.value="Edit Course"),o.value=!0},w=a=>{d.value=a,l.value=!0},b=()=>{l.value=!1},C=()=>{o.value=!1},k=P(()=>({name:"required|min:2|max:30",price:"required",period:"required"})),V=async a=>{var m,v;u.value=!0,(m=i.value)!=null&&m._id?await t.updateCourse({...a},(v=i.value)==null?void 0:v._id)?(S("successfully updated "),o.value=!1,location.reload()):(console.log(t.error,"error"),N(t.error.message)):await t.addCourse({...a})?(S("successfully added "),o.value=!1,location.reload()):N(t.error),u.value=!1},c=async()=>{u.value=!0;const a=await t.deleteCourse(d.value);u.value=!1,a?U("Deleted success"):N("Failed!"),l.value=!1,location.reload()};return A({openModal:D,closeModal:C,openDelModal:w}),(a,m)=>{const v=F("vee-form");return p(),h(T,null,[e(E,{modelValue:l.value,"onUpdate:modelValue":m[0]||(m[0]=x=>l.value=x)},{default:r(()=>[e(v,null,{default:r(()=>[s("span",X,[e(_(O),{type:"mdi",path:_(H),class:"w-20 h-20 text-red-700 mb-3"},null,8,["path"])]),s("h1",Y,y(L.value),1),s("div",Z,[e($,{btn_type:"danger",isLoading:u.value,type:"button",class:"mt-5 text-[18px] px-8",onClick:c},{default:r(()=>[M(" Delete ")]),_:1},8,["isLoading"]),e($,{btn_type:"primary",isLoading:!1,type:"button",class:"mt-5 px-8 text-[18px]",onClick:b},{default:r(()=>[M(" Cancel ")]),_:1})])]),_:1})]),_:1},8,["modelValue"]),e(E,{modelValue:o.value,"onUpdate:modelValue":m[1]||(m[1]=x=>o.value=x)},{default:r(()=>[s("h1",ee,y(f.value),1),e(v,{"validation-schema":k.value,"initial-values":i.value,onSubmit:V},{default:r(()=>[e(j,{type:"text",name:"name",label:"Course Name",placeholder:"Enter course name"}),e(j,{type:"number",name:"price",label:"Price",placeholder:"Enter course price",class:"example"}),e(j,{type:"number",name:"period",label:"Period",placeholder:"Enter course period",class:"example"}),e($,{btn_type:"primary",isLoading:u.value,type:"submit",class:"mt-5 w-full text-[18px]"},{default:r(()=>[M(y(g.value),1)]),_:1},8,["isLoading"])]),_:1},8,["validation-schema","initial-values"])]),_:1},8,["modelValue"])],64)}}},ae={class:"w-full pt-5"},se={class:"w-full"},le={key:1},oe={class:"w-full flex justify-between items-center sm:pr-5"},ne={class:"text-[#002842] text-[22px] font-semibold uppercase"},re={class:"w-full mt-5 overflow-auto"},ue=s("span",{class:"w-full flex justify-center items-center"},[s("input",{type:"checkbox",class:"w-[18px] h-[18px]"})],-1),ie=["onClick"],ce={class:"w-full flex justify-start items-center"},de={key:1,class:"w-full text-center text-[20px] text-color1 mt-10 font-medium"},me={key:2,class:"w-full flex justify-end px-5 items-center mt-3"},be={__name:"CoursePage",setup(I){const A=z(),t=B(),u=async()=>{d.value=await t.getCourses(l.value)},l=n({page:1,limit:10}),o=n(""),f=n([{title:"checkbox",value:"check"},{title:"ID",value:"_id"},{title:"Course name",value:"name"},{title:"Price",value:"price"},{title:"Period",value:"period"},{title:"Action",value:"action"}]),d=n(0);G(async()=>{d.value=await t.getCourses(l.value)});const L=g=>{A.push({path:`/courses/${g}`})};return(g,i)=>{var w,b,C,k,V;const D=F("vue-awesome-paginate");return p(),h("div",ae,[s("div",se,[e(te,{ref_key:"course_modal",ref:o},null,512)]),_(t).loading?(p(),q(K,{key:0})):(p(),h("div",le,[s("div",oe,[s("h1",ne," Courses ("+y(d.value)+") ",1),e($,{type:"button",btn_type:"primary",isLoading:!1,onClick:o.value.openModal,class:"px-10"},{default:r(()=>[M("Add course")]),_:1},8,["onClick"])]),s("div",re,[(b=(w=_(t))==null?void 0:w.courses)!=null&&b.length?(p(),q(Q,{key:0,header:f.value,data:(C=_(t))==null?void 0:C.courses},{body_check:r(()=>[ue]),body_name:r(({item:c})=>[s("span",{onClick:a=>L(c._id),class:"w-full"},y(`${c.name}`),9,ie)]),body_action:r(({item:c})=>[s("span",ce,[e(W,{item:c,item_action:o.value},null,8,["item","item_action"])])]),_:1},8,["header","data"])):(p(),h("h1",de," No data ")),(V=(k=_(t))==null?void 0:k.courses)!=null&&V.length?(p(),h("div",me,[e(D,{"total-items":d.value,"items-per-page":l.value.limit,"max-pages-shown":2,modelValue:l.value.page,"onUpdate:modelValue":i[0]||(i[0]=c=>l.value.page=c),"on-click":u},null,8,["total-items","items-per-page","modelValue"])])):J("",!0)])]))])}}};export{be as default};
